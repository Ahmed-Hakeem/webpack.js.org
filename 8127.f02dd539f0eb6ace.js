"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8127],{8127:function(e,a,n){n.r(a),n(3696);var t=n(1445);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},o.apply(null,arguments)}function s(e){let{components:a,...n}=e;return(0,t.yg)("wrapper",o({components:a},n),(0,t.yg)("p",null,"Plugins are a key piece of the webpack ecosystem and provide the community with\na powerful way to tap into webpack's compilation process. A plugin is able to\n",(0,t.yg)("a",{href:"/api/compiler-hooks/#hooks",parentName:"p"},"hook")," into key events that are fired throughout each compilation. Every step\nof the way, the plugin will have full access to the ",(0,t.yg)("inlineCode",{parentName:"p"},"compiler")," and, when\napplicable, the current ",(0,t.yg)("inlineCode",{parentName:"p"},"compilation"),"."),(0,t.yg)("aside",{className:"tip"},(0,t.yg)("h6",{className:"tip__prefix",parentName:"aside"},"tip"),(0,t.yg)("p",{parentName:"aside"},"For a high-level introduction to writing plugins, start with\n",(0,t.yg)("a",{href:"/contribute/writing-a-plugin",parentName:"p"},"writing a plugin"),".")),(0,t.yg)("p",null,"Let's start by going over ",(0,t.yg)("inlineCode",{parentName:"p"},"tapable")," utility, which provides the backbone of\nwebpack's plugin interface."),(0,t.yg)("h2",null,(0,t.yg)("span",{id:"tapable",parentName:"h2"}),"Tapable",(0,t.yg)("a",{href:"#tapable","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,t.yg)("span",{className:"header-link",parentName:"a"}))),(0,t.yg)("p",null,"This small library is a core utility in webpack but can also be used elsewhere\nto provide a similar plugin interface. Many objects in webpack extend the\n",(0,t.yg)("inlineCode",{parentName:"p"},"Tapable")," class. The class exposes ",(0,t.yg)("inlineCode",{parentName:"p"},"tap"),", ",(0,t.yg)("inlineCode",{parentName:"p"},"tapAsync"),", and ",(0,t.yg)("inlineCode",{parentName:"p"},"tapPromise")," methods\nwhich plugins can use to inject custom build steps that will be fired\nthroughout a compilation."),(0,t.yg)("p",null,"Please see the ",(0,t.yg)("a",{href:"https://github.com/webpack/tapable",parentName:"p"},"documentation")," to learn\nmore. An understanding of the three ",(0,t.yg)("inlineCode",{parentName:"p"},"tap")," methods, as well as the hooks that\nprovide them, is crucial. The objects that extend ",(0,t.yg)("inlineCode",{parentName:"p"},"Tapable")," (e.g. the compiler),\nthe hooks they provide, and each hook's type (e.g. the ",(0,t.yg)("inlineCode",{parentName:"p"},"SyncHook"),") will be\nnoted."),(0,t.yg)("h2",null,(0,t.yg)("span",{id:"plugin-types",parentName:"h2"}),"Plugin Types",(0,t.yg)("a",{href:"#plugin-types","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,t.yg)("span",{className:"header-link",parentName:"a"}))),(0,t.yg)("p",null,"Depending on the hooks used and ",(0,t.yg)("inlineCode",{parentName:"p"},"tap")," methods applied, plugins can function in\na different number of ways. The way this works is closely related to the\n",(0,t.yg)("a",{href:"https://github.com/webpack/tapable#tapable",parentName:"p"},"hooks")," provided by ",(0,t.yg)("inlineCode",{parentName:"p"},"Tapable"),". The\n",(0,t.yg)("a",{href:"/api/compiler-hooks/#hooks",parentName:"p"},"compiler hooks")," each note the underlying ",(0,t.yg)("inlineCode",{parentName:"p"},"Tapable")," hook indicating which\n",(0,t.yg)("inlineCode",{parentName:"p"},"tap")," methods are available."),(0,t.yg)("p",null,"So depending on which event you ",(0,t.yg)("inlineCode",{parentName:"p"},"tap")," into, the plugin may run differently. For\nexample, when hooking into the ",(0,t.yg)("inlineCode",{parentName:"p"},"compile")," stage, only the synchronous ",(0,t.yg)("inlineCode",{parentName:"p"},"tap")," method\ncan be used:"),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-js",parentName:"pre"},"compiler",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),"hooks",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),"compile",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"tap"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token string",parentName:"code"},"'MyPlugin'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token parameter",parentName:"code"},"params"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  console",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"log"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token string",parentName:"code"},"'Synchronously tapping the compile hook.'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.yg)("p",null,"However, for ",(0,t.yg)("inlineCode",{parentName:"p"},"run")," which utilizes the ",(0,t.yg)("inlineCode",{parentName:"p"},"AsyncHook"),", we can utilize ",(0,t.yg)("inlineCode",{parentName:"p"},"tapAsync"),"\nor ",(0,t.yg)("inlineCode",{parentName:"p"},"tapPromise")," (as well as ",(0,t.yg)("inlineCode",{parentName:"p"},"tap"),"):"),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-js",parentName:"pre"},"compiler",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),"hooks",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),"run",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"tapAsync"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"\n  ",(0,t.yg)("span",{className:"token string",parentName:"code"},"'MyPlugin'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token parameter",parentName:"code"},"source",(0,t.yg)("span",{className:"token punctuation",parentName:"span"},",")," target",(0,t.yg)("span",{className:"token punctuation",parentName:"span"},",")," routesList",(0,t.yg)("span",{className:"token punctuation",parentName:"span"},",")," callback"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    console",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"log"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token string",parentName:"code"},"'Asynchronously tapping the run hook.'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n    ",(0,t.yg)("span",{className:"token function",parentName:"code"},"callback"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"}"),"\n",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n\ncompiler",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),"hooks",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),"run",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"tapPromise"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token string",parentName:"code"},"'MyPlugin'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token parameter",parentName:"code"},"source",(0,t.yg)("span",{className:"token punctuation",parentName:"span"},",")," target",(0,t.yg)("span",{className:"token punctuation",parentName:"span"},",")," routesList"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,t.yg)("span",{className:"token keyword",parentName:"code"},"return")," ",(0,t.yg)("span",{className:"token keyword",parentName:"code"},"new")," ",(0,t.yg)("span",{className:"token class-name",parentName:"code"},"Promise"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token parameter",parentName:"code"},"resolve"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,t.yg)("span",{className:"token function",parentName:"code"},"setTimeout"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"resolve",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token number",parentName:"code"},"1000"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"then"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    console",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"log"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token string",parentName:"code"},"'Asynchronously tapping the run hook with a delay.'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n\ncompiler",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),"hooks",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),"run",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"tapPromise"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"\n  ",(0,t.yg)("span",{className:"token string",parentName:"code"},"'MyPlugin'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.yg)("span",{className:"token keyword",parentName:"code"},"async")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token parameter",parentName:"code"},"source",(0,t.yg)("span",{className:"token punctuation",parentName:"span"},",")," target",(0,t.yg)("span",{className:"token punctuation",parentName:"span"},",")," routesList"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,t.yg)("span",{className:"token keyword",parentName:"code"},"await")," ",(0,t.yg)("span",{className:"token keyword",parentName:"code"},"new")," ",(0,t.yg)("span",{className:"token class-name",parentName:"code"},"Promise"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token parameter",parentName:"code"},"resolve"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,t.yg)("span",{className:"token function",parentName:"code"},"setTimeout"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"resolve",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token number",parentName:"code"},"1000"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n    console",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"log"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token string",parentName:"code"},"'Asynchronously tapping the run hook with a delay.'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"}"),"\n",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.yg)("p",null,"The moral of the story is that there are a variety of ways to ",(0,t.yg)("inlineCode",{parentName:"p"},"hook")," into the\n",(0,t.yg)("inlineCode",{parentName:"p"},"compiler"),", each one allowing your plugin to run as it sees fit."),(0,t.yg)("h2",null,(0,t.yg)("span",{id:"custom-hooks",parentName:"h2"}),"Custom Hooks",(0,t.yg)("a",{href:"#custom-hooks","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,t.yg)("span",{className:"header-link",parentName:"a"}))),(0,t.yg)("p",null,"In order to offer a custom hook to the compilation for other plugins to ",(0,t.yg)("inlineCode",{parentName:"p"},"tap")," into,\nyou need to do the following:"),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},"Create a module-scope ",(0,t.yg)("inlineCode",{parentName:"p"},"WeakMap")," for compilation hooks:"),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{className:"hljs language-ts",parentName:"pre"},(0,t.yg)("span",{className:"token keyword",parentName:"code"},"const")," compilationHooks ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.yg)("span",{className:"token keyword",parentName:"code"},"new")," ",(0,t.yg)("span",{className:"token class-name",parentName:"code"},"WeakMap",(0,t.yg)("span",{className:"token operator",parentName:"span"},"<"),"Compilation",(0,t.yg)("span",{className:"token punctuation",parentName:"span"},",")," MyHooks",(0,t.yg)("span",{className:"token operator",parentName:"span"},">")),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,t.yg)("span",{className:"token keyword",parentName:"code"},"interface")," ",(0,t.yg)("span",{className:"token class-name",parentName:"code"},"MyHooks")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  custom",(0,t.yg)("span",{className:"token operator",parentName:"code"},":")," SyncHook",(0,t.yg)("span",{className:"token operator",parentName:"code"},"<"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"["),(0,t.yg)("span",{className:"token builtin",parentName:"code"},"number"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token builtin",parentName:"code"},"string"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"]"),(0,t.yg)("span",{className:"token operator",parentName:"code"},">"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"}")))),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},"Create a static method on your plugin:"),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{className:"hljs language-ts",parentName:"pre"},(0,t.yg)("span",{className:"token keyword",parentName:"code"},"static")," ",(0,t.yg)("span",{className:"token function",parentName:"code"},"getCompilationHooks"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"compilation",(0,t.yg)("span",{className:"token operator",parentName:"code"},":")," Compilation",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,t.yg)("span",{className:"token operator",parentName:"code"},":")," MyHooks ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,t.yg)("span",{className:"token keyword",parentName:"code"},"let")," hooks ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=")," compilationHooks",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token keyword",parentName:"code"},"get"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"compilation",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,t.yg)("span",{className:"token keyword",parentName:"code"},"if"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"hooks ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"===")," ",(0,t.yg)("span",{className:"token keyword",parentName:"code"},"undefined"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    compilationHooks",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token keyword",parentName:"code"},"set"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"compilation",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," hooks ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      custom",(0,t.yg)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.yg)("span",{className:"token keyword",parentName:"code"},"new")," ",(0,t.yg)("span",{className:"token class-name",parentName:"code"},"SyncHook"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),"\n    ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"}"),"\n  ",(0,t.yg)("span",{className:"token keyword",parentName:"code"},"return")," hooks",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"}")))),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},"Call hooks like below in your plugin:"),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{className:"hljs language-ts",parentName:"pre"},(0,t.yg)("span",{className:"token keyword",parentName:"code"},"const")," hooks ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=")," MyPlugin",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"getCompilationHooks"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"compilation",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n\nhooks",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"custom"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"call"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token number",parentName:"code"},"1"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token string",parentName:"code"},"'hello'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";")))),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("p",{parentName:"li"},"Other plugins can access your custom hooks too:"),(0,t.yg)("pre",{parentName:"li"},(0,t.yg)("code",{className:"hljs language-ts",parentName:"pre"},(0,t.yg)("span",{className:"token keyword",parentName:"code"},"import")," MyPlugin ",(0,t.yg)("span",{className:"token keyword",parentName:"code"},"from")," ",(0,t.yg)("span",{className:"token string",parentName:"code"},"'my-plugin'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,t.yg)("span",{className:"token keyword",parentName:"code"},"const")," hooks ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=")," MyPlugin",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"getCompilationHooks"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"compilation",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n\nhooks",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),"custom",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"tap"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token string",parentName:"code"},"'OtherPlugin'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"n",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," s",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,t.yg)("span",{className:"token comment",parentName:"code"},"// magic"),"\n",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"))))),(0,t.yg)("p",null,"Again, see the ",(0,t.yg)("a",{href:"https://github.com/webpack/tapable",parentName:"p"},"documentation")," for ",(0,t.yg)("inlineCode",{parentName:"p"},"tapable")," to learn more about the\ndifferent hook classes and how they work."),(0,t.yg)("h2",null,(0,t.yg)("span",{id:"reporting-progress",parentName:"h2"}),"Reporting Progress",(0,t.yg)("a",{href:"#reporting-progress","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,t.yg)("span",{className:"header-link",parentName:"a"}))),(0,t.yg)("p",null,"Plugins can report progress via ",(0,t.yg)("a",{href:"/plugins/progress-plugin/",parentName:"p"},(0,t.yg)("inlineCode",{parentName:"a"},"ProgressPlugin")),", which prints progress messages to stderr by default. In order to enable progress reporting, pass a ",(0,t.yg)("inlineCode",{parentName:"p"},"--progress")," argument when running the ",(0,t.yg)("a",{href:"/api/cli/",parentName:"p"},"webpack CLI"),"."),(0,t.yg)("p",null,"It is possible to customize the printed output by passing different arguments to the ",(0,t.yg)("inlineCode",{parentName:"p"},"reportProgress")," function of ",(0,t.yg)("a",{href:"/plugins/progress-plugin/",parentName:"p"},(0,t.yg)("inlineCode",{parentName:"a"},"ProgressPlugin")),"."),(0,t.yg)("p",null,"To report progress, a plugin must ",(0,t.yg)("inlineCode",{parentName:"p"},"tap")," into a hook using the ",(0,t.yg)("inlineCode",{parentName:"p"},"context: true")," option:"),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-js",parentName:"pre"},"compiler",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),"hooks",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),"emit",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"tapAsync"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"\n  ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    name",(0,t.yg)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.yg)("span",{className:"token string",parentName:"code"},"'MyPlugin'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},","),"\n    context",(0,t.yg)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.yg)("span",{className:"token boolean",parentName:"code"},"true"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token parameter",parentName:"code"},"context",(0,t.yg)("span",{className:"token punctuation",parentName:"span"},",")," compiler",(0,t.yg)("span",{className:"token punctuation",parentName:"span"},",")," callback"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,t.yg)("span",{className:"token keyword",parentName:"code"},"const")," reportProgress ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=")," context ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"&&")," context",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),"reportProgress",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n    ",(0,t.yg)("span",{className:"token keyword",parentName:"code"},"if")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"reportProgress",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,t.yg)("span",{className:"token function",parentName:"code"},"reportProgress"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token number",parentName:"code"},"0.95"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token string",parentName:"code"},"'Starting work'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n    ",(0,t.yg)("span",{className:"token function",parentName:"code"},"setTimeout"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      ",(0,t.yg)("span",{className:"token keyword",parentName:"code"},"if")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"reportProgress",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,t.yg)("span",{className:"token function",parentName:"code"},"reportProgress"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token number",parentName:"code"},"0.95"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token string",parentName:"code"},"'Done work'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n      ",(0,t.yg)("span",{className:"token function",parentName:"code"},"callback"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n    ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token number",parentName:"code"},"1000"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"}"),"\n",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.yg)("p",null,"The ",(0,t.yg)("inlineCode",{parentName:"p"},"reportProgress")," function may be called with these arguments:"),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-js",parentName:"pre"},(0,t.yg)("span",{className:"token function",parentName:"code"},"reportProgress"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"percentage",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"..."),"args",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},"percentage"),": This argument is unused; instead, ",(0,t.yg)("a",{href:"/plugins/progress-plugin/",parentName:"li"},(0,t.yg)("inlineCode",{parentName:"a"},"ProgressPlugin"))," will calculate a percentage based on the current hook."),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},"...args"),": Any number of strings, which will be passed to the ",(0,t.yg)("inlineCode",{parentName:"li"},"ProgressPlugin")," handler to be reported to the user.")),(0,t.yg)("p",null,"Note that only a subset of compiler and compilation hooks support the ",(0,t.yg)("inlineCode",{parentName:"p"},"reportProgress")," function. See ",(0,t.yg)("a",{href:"/plugins/progress-plugin/#supported-hooks",parentName:"p"},(0,t.yg)("inlineCode",{parentName:"a"},"ProgressPlugin"))," for a full list."),(0,t.yg)("h2",null,(0,t.yg)("span",{id:"logging",parentName:"h2"}),"Logging",(0,t.yg)("a",{href:"#logging","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,t.yg)("span",{className:"header-link",parentName:"a"}))),(0,t.yg)("p",null,"Logging API is available since the release of webpack 4.37. When ",(0,t.yg)("inlineCode",{parentName:"p"},"logging")," is enabled in ",(0,t.yg)("a",{href:"/configuration/stats/#statslogging",parentName:"p"},(0,t.yg)("inlineCode",{parentName:"a"},"stats configuration"))," and/or when ",(0,t.yg)("a",{href:"/configuration/infrastructureLogging",parentName:"p"},(0,t.yg)("inlineCode",{parentName:"a"},"infrastructure logging"))," is enabled, plugins may log messages which will be printed out in the respective logger format (stats, infrastructure)."),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},"Plugins should prefer to use ",(0,t.yg)("inlineCode",{parentName:"li"},"compilation.getLogger('PluginName')")," for logging. This kind of logging is stored in the Stats and formatted accordingly. It can be filtered and exported by the user."),(0,t.yg)("li",{parentName:"ul"},"Plugins may use the ",(0,t.yg)("inlineCode",{parentName:"li"},"compiler.getInfrastructureLogger('PluginName')")," for logging. Using ",(0,t.yg)("inlineCode",{parentName:"li"},"infrastructure")," logging is not stored in the Stats and therefore not formatted. It's usually logged to the console/dashboard/GUI directly. It can be filtered by the user."),(0,t.yg)("li",{parentName:"ul"},"Plugins may use specific fallback logic for detecting logging support ",(0,t.yg)("inlineCode",{parentName:"li"},"compilation.getLogger ? compilation.getLogger('PluginName') : console")," to provide a fallback for cases when an older webpack version is used which does not support ",(0,t.yg)("inlineCode",{parentName:"li"},"getLogger")," method on ",(0,t.yg)("inlineCode",{parentName:"li"},"compilation")," object.")),(0,t.yg)("h2",null,(0,t.yg)("span",{id:"next-steps",parentName:"h2"}),"Next Steps",(0,t.yg)("a",{href:"#next-steps","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,t.yg)("span",{className:"header-link",parentName:"a"}))),(0,t.yg)("p",null,"See the ",(0,t.yg)("a",{href:"/api/compiler-hooks/",parentName:"p"},"compiler hooks")," section for a detailed listing of all the available\n",(0,t.yg)("inlineCode",{parentName:"p"},"compiler")," hooks and the parameters they make available."))}s.isMDXComponent=!0,a.default=s}}]);