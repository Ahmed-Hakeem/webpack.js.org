"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6826],{6826:function(e,a,n){n.r(a),n(3696);var t=n(1445);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},s.apply(null,arguments)}function o(e){let{components:a,...n}=e;return(0,t.yg)("wrapper",s({components:a},n),(0,t.yg)("p",null,"As of webpack 5, you can use ",(0,t.yg)("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers",parentName:"p"},"Web Workers")," without ",(0,t.yg)("a",{href:"https://github.com/webpack-contrib/worker-loader",parentName:"p"},(0,t.yg)("inlineCode",{parentName:"a"},"worker-loader")),"."),(0,t.yg)("h2",null,(0,t.yg)("span",{id:"syntax",parentName:"h2"}),"Syntax",(0,t.yg)("a",{href:"#syntax","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,t.yg)("span",{className:"header-link",parentName:"a"}))),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-js",parentName:"pre"},(0,t.yg)("span",{className:"token keyword",parentName:"code"},"new")," ",(0,t.yg)("span",{className:"token class-name",parentName:"code"},"Worker"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token keyword",parentName:"code"},"new")," ",(0,t.yg)("span",{className:"token class-name",parentName:"code"},"URL"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token string",parentName:"code"},"'./worker.js'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token keyword",parentName:"code"},"import"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),"meta",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),"url",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-js",parentName:"pre"},(0,t.yg)("span",{className:"token comment",parentName:"code"},"// or customize the chunk name with magic comments"),"\n",(0,t.yg)("span",{className:"token comment",parentName:"code"},"// see https://webpack.js.org/api/module-methods/#magic-comments"),"\n",(0,t.yg)("span",{className:"token keyword",parentName:"code"},"new")," ",(0,t.yg)("span",{className:"token class-name",parentName:"code"},"Worker"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"\n  ",(0,t.yg)("span",{className:"token comment",parentName:"code"},'/* webpackChunkName: "foo-worker" */')," ",(0,t.yg)("span",{className:"token keyword",parentName:"code"},"new")," ",(0,t.yg)("span",{className:"token class-name",parentName:"code"},"URL"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token string",parentName:"code"},"'./worker.js'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token keyword",parentName:"code"},"import"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),"meta",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),"url",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),"\n",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.yg)("p",null,"The syntax was chosen to allow running code without bundler, it is also available in native ECMAScript modules in the browser."),(0,t.yg)("p",null,"Note that while the ",(0,t.yg)("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/Worker/Worker",parentName:"p"},(0,t.yg)("inlineCode",{parentName:"a"},"Worker")," API")," suggests that ",(0,t.yg)("inlineCode",{parentName:"p"},"Worker")," constructor would accept a string representing the URL of the script, in webpack 5 you can only use ",(0,t.yg)("inlineCode",{parentName:"p"},"URL")," instead."),(0,t.yg)("aside",{className:"warning"},(0,t.yg)("h6",{className:"warning__prefix",parentName:"aside"},"warning"),(0,t.yg)("p",{parentName:"aside"},"Using a variable in the ",(0,t.yg)("inlineCode",{parentName:"p"},"Worker")," constructor is not supported by webpack. For example, the following code will not work: ",(0,t.yg)("inlineCode",{parentName:"p"},"const url = new URL('./path/to/worker.ts', import.meta.url); const worker = new Worker(url);"),". This is because webpack cannot analyse the syntax statically. It is important to be aware of this limitation when using ",(0,t.yg)("inlineCode",{parentName:"p"},"Worker")," syntax with webpack.")),(0,t.yg)("h2",null,(0,t.yg)("span",{id:"example",parentName:"h2"}),"Example",(0,t.yg)("a",{href:"#example","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,t.yg)("span",{className:"header-link",parentName:"a"}))),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"src/index.js")),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-js",parentName:"pre"},(0,t.yg)("span",{className:"token keyword",parentName:"code"},"const")," worker ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.yg)("span",{className:"token keyword",parentName:"code"},"new")," ",(0,t.yg)("span",{className:"token class-name",parentName:"code"},"Worker"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token keyword",parentName:"code"},"new")," ",(0,t.yg)("span",{className:"token class-name",parentName:"code"},"URL"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token string",parentName:"code"},"'./deep-thought.js'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token keyword",parentName:"code"},"import"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),"meta",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),"url",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\nworker",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"postMessage"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  question",(0,t.yg)("span",{className:"token operator",parentName:"code"},":"),"\n    ",(0,t.yg)("span",{className:"token string",parentName:"code"},"'The Answer to the Ultimate Question of Life, The Universe, and Everything.'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\nworker",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function-variable function",parentName:"code"},"onmessage")," ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token parameter",parentName:"code"},(0,t.yg)("span",{className:"token punctuation",parentName:"span"},"{")," data",(0,t.yg)("span",{className:"token operator",parentName:"span"},":")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"span"},"{")," answer ",(0,t.yg)("span",{className:"token punctuation",parentName:"span"},"}")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"span"},"}")),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  console",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"log"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"answer",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"src/deep-thought.js")),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-js",parentName:"pre"},"self",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function-variable function",parentName:"code"},"onmessage")," ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token parameter",parentName:"code"},(0,t.yg)("span",{className:"token punctuation",parentName:"span"},"{")," data",(0,t.yg)("span",{className:"token operator",parentName:"span"},":")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"span"},"{")," question ",(0,t.yg)("span",{className:"token punctuation",parentName:"span"},"}")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"span"},"}")),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  self",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"postMessage"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    answer",(0,t.yg)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.yg)("span",{className:"token number",parentName:"code"},"42"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.yg)("h2",null,(0,t.yg)("span",{id:"nodejs",parentName:"h2"}),"Node.js",(0,t.yg)("a",{href:"#nodejs","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,t.yg)("span",{className:"header-link",parentName:"a"}))),(0,t.yg)("p",null,"Similar syntax is supported in Node.js (>= 12.17.0):"),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-js",parentName:"pre"},(0,t.yg)("span",{className:"token keyword",parentName:"code"},"import")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"{")," Worker ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"}")," ",(0,t.yg)("span",{className:"token keyword",parentName:"code"},"from")," ",(0,t.yg)("span",{className:"token string",parentName:"code"},"'worker_threads'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,t.yg)("span",{className:"token keyword",parentName:"code"},"new")," ",(0,t.yg)("span",{className:"token class-name",parentName:"code"},"Worker"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token keyword",parentName:"code"},"new")," ",(0,t.yg)("span",{className:"token class-name",parentName:"code"},"URL"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token string",parentName:"code"},"'./worker.js'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token keyword",parentName:"code"},"import"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),"meta",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),"url",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.yg)("p",null,"Note that this is only available in ESM. ",(0,t.yg)("inlineCode",{parentName:"p"},"Worker")," in CommonJS syntax is not supported by either webpack or Node.js."))}o.isMDXComponent=!0,a.default=o}}]);