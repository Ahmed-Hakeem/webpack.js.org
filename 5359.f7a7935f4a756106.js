"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5359],{5359:function(e,a,n){n.r(a),n(3696);var t=n(1445);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},s.apply(null,arguments)}function o(e){let{components:a,...n}=e;return(0,t.yg)("wrapper",s({components:a},n),(0,t.yg)("blockquote",null,(0,t.yg)("p",{parentName:"blockquote"},"es6 modules")),(0,t.yg)("blockquote",null,(0,t.yg)("p",{parentName:"blockquote"},"commonjs")),(0,t.yg)("blockquote",null,(0,t.yg)("p",{parentName:"blockquote"},"amd")),(0,t.yg)("h2",null,(0,t.yg)("span",{id:"require-with-expression",parentName:"h2"}),"require with expression",(0,t.yg)("a",{href:"#require-with-expression","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,t.yg)("span",{className:"header-link",parentName:"a"}))),(0,t.yg)("p",null,"A context is created if your request contains expressions, so the ",(0,t.yg)("strong",{parentName:"p"},"exact")," module is not known on compile time."),(0,t.yg)("p",null,"Example, given we have the following folder structure including ",(0,t.yg)("inlineCode",{parentName:"p"},".ejs")," files:"),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-bash",parentName:"pre"},"example_directory\n│\n└───template\n│   │   table.ejs\n│   │   table-row.ejs\n│   │\n│   └───directory\n│       │   another.ejs")),(0,t.yg)("p",null,"When following ",(0,t.yg)("inlineCode",{parentName:"p"},"require()")," call is evaluated:"),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-javascript",parentName:"pre"},(0,t.yg)("span",{className:"token function",parentName:"code"},"require"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token string",parentName:"code"},"'./template/'")," ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"+")," name ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"+")," ",(0,t.yg)("span",{className:"token string",parentName:"code"},"'.ejs'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.yg)("p",null,"Webpack parses the ",(0,t.yg)("inlineCode",{parentName:"p"},"require()")," call and extracts some information:"),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-code",parentName:"pre"},"Directory: ./template\nRegular expression: /^.*\\.ejs$/\n")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"context module")),(0,t.yg)("p",null,"A context module is generated. It contains references to ",(0,t.yg)("strong",{parentName:"p"},"all modules in that directory")," that can be required with a request matching the regular expression. The context module contains a map which translates requests to module ids."),(0,t.yg)("p",null,"Example map:"),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-json",parentName:"pre"},(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,t.yg)("span",{className:"token property",parentName:"code"},'"./table.ejs"'),(0,t.yg)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.yg)("span",{className:"token number",parentName:"code"},"42"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.yg)("span",{className:"token property",parentName:"code"},'"./table-row.ejs"'),(0,t.yg)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.yg)("span",{className:"token number",parentName:"code"},"43"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.yg)("span",{className:"token property",parentName:"code"},'"./directory/another.ejs"'),(0,t.yg)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.yg)("span",{className:"token number",parentName:"code"},"44"),"\n",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"}"))),(0,t.yg)("p",null,"The context module also contains some runtime logic to access the map."),(0,t.yg)("p",null,"This means dynamic requires are supported but will cause all matching modules to be included in the bundle."),(0,t.yg)("h2",null,(0,t.yg)("span",{id:"requirecontext",parentName:"h2"}),"require.context",(0,t.yg)("a",{href:"#requirecontext","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,t.yg)("span",{className:"header-link",parentName:"a"}))),(0,t.yg)("p",null,"You can create your own context with the ",(0,t.yg)("inlineCode",{parentName:"p"},"require.context()")," function."),(0,t.yg)("p",null,"It allows you to pass in a directory to search, a flag indicating whether subdirectories should be searched\ntoo, and a regular expression to match files against."),(0,t.yg)("p",null,"Webpack parses for ",(0,t.yg)("inlineCode",{parentName:"p"},"require.context()")," in the code while building."),(0,t.yg)("p",null,"The syntax is as follows:"),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-javascript",parentName:"pre"},"require",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"context"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"\n  directory",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"useSubdirectories ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.yg)("span",{className:"token boolean",parentName:"code"},"true"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"regExp ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.yg)("span",{className:"token regex",parentName:"code"},"/^\\.\\/.*$/"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"mode ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.yg)("span",{className:"token string",parentName:"code"},"'sync'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),"\n",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.yg)("p",null,"Examples:"),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-javascript",parentName:"pre"},"require",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"context"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token string",parentName:"code"},"'./test'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token boolean",parentName:"code"},"false"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token regex",parentName:"code"},"/\\.test\\.js$/"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,t.yg)("span",{className:"token comment",parentName:"code"},"// a context with files from the test directory that can be required with a request ending with `.test.js`."))),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-javascript",parentName:"pre"},"require",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"context"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token string",parentName:"code"},"'../'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token boolean",parentName:"code"},"true"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token regex",parentName:"code"},"/\\.stories\\.js$/"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,t.yg)("span",{className:"token comment",parentName:"code"},"// a context with all files in the parent folder and descending folders ending with `.stories.js`."))),(0,t.yg)("aside",{className:"warning"},(0,t.yg)("h6",{className:"warning__prefix",parentName:"aside"},"warning"),(0,t.yg)("p",{parentName:"aside"},"The arguments passed to ",(0,t.yg)("inlineCode",{parentName:"p"},"require.context")," must be literals!")),(0,t.yg)("h3",null,(0,t.yg)("span",{id:"context-module-api",parentName:"h3"}),"context module API",(0,t.yg)("a",{href:"#context-module-api","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,t.yg)("span",{className:"header-link",parentName:"a"}))),(0,t.yg)("p",null,"A context module exports a (require) function that takes one argument: the request."),(0,t.yg)("p",null,"The exported function has 3 properties: ",(0,t.yg)("inlineCode",{parentName:"p"},"resolve"),", ",(0,t.yg)("inlineCode",{parentName:"p"},"keys"),", ",(0,t.yg)("inlineCode",{parentName:"p"},"id"),"."),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},"resolve")," is a function and returns the module id of the parsed request."),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},"keys")," is a function that returns an array of all possible requests that the context module can handle.")),(0,t.yg)("p",null,"This can be useful if you want to require all files in a directory or matching a pattern, Example:"),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-javascript",parentName:"pre"},(0,t.yg)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,t.yg)("span",{className:"token function",parentName:"code"},"importAll"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token parameter",parentName:"code"},"r"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  r",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"keys"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"forEach"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"r",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"}"),"\n\n",(0,t.yg)("span",{className:"token function",parentName:"code"},"importAll"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"require",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"context"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token string",parentName:"code"},"'../components/'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token boolean",parentName:"code"},"true"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token regex",parentName:"code"},"/\\.js$/"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-javascript",parentName:"pre"},(0,t.yg)("span",{className:"token keyword",parentName:"code"},"const")," cache ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"{"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,t.yg)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,t.yg)("span",{className:"token function",parentName:"code"},"importAll"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token parameter",parentName:"code"},"r"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  r",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"keys"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"forEach"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token parameter",parentName:"code"},"key"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"cache",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"["),"key",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.yg)("span",{className:"token function",parentName:"code"},"r"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"key",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"}"),"\n\n",(0,t.yg)("span",{className:"token function",parentName:"code"},"importAll"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"require",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"context"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token string",parentName:"code"},"'../components/'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token boolean",parentName:"code"},"true"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token regex",parentName:"code"},"/\\.js$/"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,t.yg)("span",{className:"token comment",parentName:"code"},"// At build-time cache will be populated with all required modules."))),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},"id")," is the module id of the context module. This may be useful for ",(0,t.yg)("inlineCode",{parentName:"li"},"module.hot.accept"),".")))}o.isMDXComponent=!0,a.default=o}}]);