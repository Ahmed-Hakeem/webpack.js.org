"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2779],{2779:function(e,a,n){n.r(a),n(3696);var t=n(1445);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},p.apply(this,arguments)}function l(e){let{components:a,...n}=e;return(0,t.yg)("wrapper",p({components:a},n),(0,t.yg)("p",null,"The ",(0,t.yg)("inlineCode",{parentName:"p"},"DllPlugin")," and ",(0,t.yg)("inlineCode",{parentName:"p"},"DllReferencePlugin"),' provide means to split bundles in a way that can drastically improve build time performance. The term "DLL" stands for Dynamic-link library which was originally introduced by Microsoft.'),(0,t.yg)("h2",null,(0,t.yg)("span",{id:"dllplugin",parentName:"h2"}),"DllPlugin",(0,t.yg)("a",{href:"#dllplugin","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,t.yg)("span",{className:"header-link",parentName:"a"}))),(0,t.yg)("p",null,"This plugin is used in a separate webpack configuration exclusively to create a dll-only-bundle. It creates a ",(0,t.yg)("inlineCode",{parentName:"p"},"manifest.json")," file, which is used by the ",(0,t.yg)("a",{href:"#dllreferenceplugin",parentName:"p"},(0,t.yg)("inlineCode",{parentName:"a"},"DllReferencePlugin"))," to map dependencies."),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},"context")," (optional): context of requests in the manifest file (defaults to the webpack context.)"),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},"format")," (boolean = false): If ",(0,t.yg)("inlineCode",{parentName:"li"},"true"),", manifest json file (output) will be formatted."),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},"name"),": name of the exposed dll function (",(0,t.yg)("a",{href:"https://github.com/webpack/webpack/blob/main/lib/TemplatedPathPlugin.js",parentName:"li"},"TemplatePaths"),": ",(0,t.yg)("inlineCode",{parentName:"li"},"[fullhash]"),", ",(0,t.yg)("inlineCode",{parentName:"li"},"[chunkhash]"),", ",(0,t.yg)("inlineCode",{parentName:"li"},"[contenthash]"),", & ",(0,t.yg)("inlineCode",{parentName:"li"},"[name]")," )"),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},"path"),": ",(0,t.yg)("strong",{parentName:"li"},"absolute path")," to the manifest json file (output)"),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},"entryOnly")," (boolean = true): if ",(0,t.yg)("inlineCode",{parentName:"li"},"true"),", only entry points will be exposed"),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},"type"),": type of the dll bundle")),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-javascript",parentName:"pre"},(0,t.yg)("span",{className:"token keyword",parentName:"code"},"new")," ",(0,t.yg)("span",{className:"token class-name",parentName:"code"},"webpack",(0,t.yg)("span",{className:"token punctuation",parentName:"span"},"."),"DllPlugin"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"options",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.yg)("aside",{className:"warning"},(0,t.yg)("h6",{className:"warning__prefix",parentName:"aside"},"warning"),(0,t.yg)("p",{parentName:"aside"},"When webpack output uses ",(0,t.yg)("a",{href:"/guides/code-splitting",parentName:"p"},"code splitting"),", we should use ",(0,t.yg)("a",{href:"/configuration/output/#template-strings",parentName:"p"},"Template strings")," in ",(0,t.yg)("inlineCode",{parentName:"p"},"path")," to ensure that webpack generates multiple manifest files.")),(0,t.yg)("aside",{className:"warning"},(0,t.yg)("h6",{className:"warning__prefix",parentName:"aside"},"warning"),(0,t.yg)("p",{parentName:"aside"},"We recommend using DllPlugin only with ",(0,t.yg)("inlineCode",{parentName:"p"},"entryOnly: true"),", otherwise tree shaking in the DLL won't work as all the exports might be used.")),(0,t.yg)("p",null,"Creates a ",(0,t.yg)("inlineCode",{parentName:"p"},"manifest.json")," which is written to the given ",(0,t.yg)("inlineCode",{parentName:"p"},"path"),". It contains mappings from require and import requests to module ids. It is used by the ",(0,t.yg)("inlineCode",{parentName:"p"},"DllReferencePlugin"),"."),(0,t.yg)("p",null,"Combine this plugin with ",(0,t.yg)("a",{href:"/configuration/output/#outputlibrary",parentName:"p"},(0,t.yg)("inlineCode",{parentName:"a"},"output.library"))," option to expose (aka, put into the global scope) the dll function."),(0,t.yg)("h2",null,(0,t.yg)("span",{id:"dllreferenceplugin",parentName:"h2"}),"DllReferencePlugin",(0,t.yg)("a",{href:"#dllreferenceplugin","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,t.yg)("span",{className:"header-link",parentName:"a"}))),(0,t.yg)("p",null,"This plugin is used in the primary webpack config, it references the dll-only-bundle(s) to require pre-built dependencies."),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},"context"),": (",(0,t.yg)("strong",{parentName:"li"},"absolute path"),") context of requests in the manifest (or content property)"),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},"extensions"),": Extensions used to resolve modules in the dll bundle (only used when using 'scope')."),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},"manifest")," : an object containing ",(0,t.yg)("inlineCode",{parentName:"li"},"content")," and ",(0,t.yg)("inlineCode",{parentName:"li"},"name")," or a string to the absolute path of the JSON manifest to be loaded upon compilation"),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},"content")," (optional): the mappings from request to module id (defaults to ",(0,t.yg)("inlineCode",{parentName:"li"},"manifest.content"),")"),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},"name")," (optional): an identifier where the dll is exposed (defaults to ",(0,t.yg)("inlineCode",{parentName:"li"},"manifest.name"),") (see also ",(0,t.yg)("a",{href:"/configuration/externals/",parentName:"li"},(0,t.yg)("inlineCode",{parentName:"a"},"externals")),")"),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},"scope")," (optional): prefix which is used for accessing the content of the dll"),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("inlineCode",{parentName:"li"},"sourceType")," (optional): how the dll is exposed (",(0,t.yg)("a",{href:"/configuration/output/#outputlibrarytarget",parentName:"li"},"libraryTarget"),")")),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-javascript",parentName:"pre"},(0,t.yg)("span",{className:"token keyword",parentName:"code"},"new")," ",(0,t.yg)("span",{className:"token class-name",parentName:"code"},"webpack",(0,t.yg)("span",{className:"token punctuation",parentName:"span"},"."),"DllReferencePlugin"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"options",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.yg)("p",null,"References a dll manifest file to map dependency names to module ids, then requires them as needed using the internal ",(0,t.yg)("inlineCode",{parentName:"p"},"__webpack_require__")," function."),(0,t.yg)("aside",{className:"warning"},(0,t.yg)("h6",{className:"warning__prefix",parentName:"aside"},"warning"),(0,t.yg)("p",{parentName:"aside"},"Keep the ",(0,t.yg)("inlineCode",{parentName:"p"},"name")," consistent with ",(0,t.yg)("a",{href:"/configuration/output/#outputlibrary",parentName:"p"},(0,t.yg)("inlineCode",{parentName:"a"},"output.library")),".")),(0,t.yg)("h3",null,(0,t.yg)("span",{id:"modes",parentName:"h3"}),"Modes",(0,t.yg)("a",{href:"#modes","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,t.yg)("span",{className:"header-link",parentName:"a"}))),(0,t.yg)("p",null,"This plugin can be used in two different modes, ",(0,t.yg)("em",{parentName:"p"},"scoped")," and ",(0,t.yg)("em",{parentName:"p"},"mapped"),"."),(0,t.yg)("h4",null,(0,t.yg)("span",{id:"scoped-mode",parentName:"h4"}),"Scoped Mode",(0,t.yg)("a",{href:"#scoped-mode","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,t.yg)("span",{className:"header-link",parentName:"a"}))),(0,t.yg)("p",null,"The content of the dll is accessible under a module prefix. i.e. with ",(0,t.yg)("inlineCode",{parentName:"p"},"scope = 'xyz'")," a file ",(0,t.yg)("inlineCode",{parentName:"p"},"abc")," in the dll can be access via ",(0,t.yg)("inlineCode",{parentName:"p"},"require('xyz/abc')"),"."),(0,t.yg)("aside",{className:"tip"},(0,t.yg)("h6",{className:"tip__prefix",parentName:"aside"},"tip"),(0,t.yg)("p",{parentName:"aside"},(0,t.yg)("a",{href:"https://github.com/webpack/webpack/tree/master/examples/dll-user",parentName:"p"},"See an example use of scope"))),(0,t.yg)("h4",null,(0,t.yg)("span",{id:"mapped-mode",parentName:"h4"}),"Mapped Mode",(0,t.yg)("a",{href:"#mapped-mode","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,t.yg)("span",{className:"header-link",parentName:"a"}))),(0,t.yg)("p",null,"The content of the dll is mapped to the current directory. If a required file matches a file in the dll (after resolving), then the file from the dll is used instead."),(0,t.yg)("p",null,"Because this happens after resolving every file in the dll bundle, the same paths must be available for the consumer of the dll bundle. i.e. if the dll contains ",(0,t.yg)("inlineCode",{parentName:"p"},"lodash")," and the file ",(0,t.yg)("inlineCode",{parentName:"p"},"abc"),", ",(0,t.yg)("inlineCode",{parentName:"p"},"require('lodash')")," and ",(0,t.yg)("inlineCode",{parentName:"p"},"require('./abc')")," will be used from the dll, rather than building them into the main bundle."),(0,t.yg)("h2",null,(0,t.yg)("span",{id:"usage",parentName:"h2"}),"Usage",(0,t.yg)("a",{href:"#usage","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,t.yg)("span",{className:"header-link",parentName:"a"}))),(0,t.yg)("aside",{className:"warning"},(0,t.yg)("h6",{className:"warning__prefix",parentName:"aside"},"warning"),(0,t.yg)("p",{parentName:"aside"},(0,t.yg)("inlineCode",{parentName:"p"},"DllReferencePlugin")," and ",(0,t.yg)("inlineCode",{parentName:"p"},"DllPlugin")," are used in ",(0,t.yg)("em",{parentName:"p"},"separate")," webpack configs.")),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"webpack.vendor.config.js")),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-javascript",parentName:"pre"},(0,t.yg)("span",{className:"token keyword",parentName:"code"},"const")," path ",(0,t.yg)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.yg)("span",{className:"token function",parentName:"code"},"require"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token string",parentName:"code"},"'path'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,t.yg)("span",{className:"token keyword",parentName:"code"},"new")," ",(0,t.yg)("span",{className:"token class-name",parentName:"code"},"webpack",(0,t.yg)("span",{className:"token punctuation",parentName:"span"},"."),"DllPlugin"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  context",(0,t.yg)("span",{className:"token operator",parentName:"code"},":")," __dirname",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},","),"\n  name",(0,t.yg)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.yg)("span",{className:"token string",parentName:"code"},"'[name]_[fullhash]'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},","),"\n  path",(0,t.yg)("span",{className:"token operator",parentName:"code"},":")," path",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.yg)("span",{className:"token function",parentName:"code"},"join"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),"__dirname",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.yg)("span",{className:"token string",parentName:"code"},"'manifest.json'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.yg)("p",null,(0,t.yg)("strong",{parentName:"p"},"webpack.app.config.js")),(0,t.yg)("pre",null,(0,t.yg)("code",{className:"hljs language-javascript",parentName:"pre"},(0,t.yg)("span",{className:"token keyword",parentName:"code"},"new")," ",(0,t.yg)("span",{className:"token class-name",parentName:"code"},"webpack",(0,t.yg)("span",{className:"token punctuation",parentName:"span"},"."),"DllReferencePlugin"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  context",(0,t.yg)("span",{className:"token operator",parentName:"code"},":")," __dirname",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},","),"\n  manifest",(0,t.yg)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.yg)("span",{className:"token function",parentName:"code"},"require"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.yg)("span",{className:"token string",parentName:"code"},"'./manifest.json'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},","),"\n  scope",(0,t.yg)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.yg)("span",{className:"token string",parentName:"code"},"'xyz'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},","),"\n  sourceType",(0,t.yg)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.yg)("span",{className:"token string",parentName:"code"},"'commonjs2'"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,t.yg)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.yg)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.yg)("h2",null,(0,t.yg)("span",{id:"examples",parentName:"h2"}),"Examples",(0,t.yg)("a",{href:"#examples","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,t.yg)("span",{className:"header-link",parentName:"a"}))),(0,t.yg)("p",null,(0,t.yg)("a",{href:"https://github.com/webpack/webpack/tree/master/examples/dll",parentName:"p"},"Vendor")," and ",(0,t.yg)("a",{href:"https://github.com/webpack/webpack/tree/master/examples/dll-user",parentName:"p"},"User")),(0,t.yg)("p",null,(0,t.yg)("em",{parentName:"p"},"Two separate example folders. Demonstrates scope and context.")),(0,t.yg)("aside",{className:"tip"},(0,t.yg)("h6",{className:"tip__prefix",parentName:"aside"},"tip"),(0,t.yg)("p",{parentName:"aside"},"Multiple ",(0,t.yg)("inlineCode",{parentName:"p"},"DllPlugins")," and multiple ",(0,t.yg)("inlineCode",{parentName:"p"},"DllReferencePlugins"),".")),(0,t.yg)("h2",null,(0,t.yg)("span",{id:"references",parentName:"h2"}),"References",(0,t.yg)("a",{href:"#references","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,t.yg)("span",{className:"header-link",parentName:"a"}))),(0,t.yg)("h3",null,(0,t.yg)("span",{id:"source",parentName:"h3"}),"Source",(0,t.yg)("a",{href:"#source","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,t.yg)("span",{className:"header-link",parentName:"a"}))),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{href:"https://github.com/webpack/webpack/blob/main/lib/DllPlugin.js",parentName:"li"},"DllPlugin source")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{href:"https://github.com/webpack/webpack/blob/main/lib/DllReferencePlugin.js",parentName:"li"},"DllReferencePlugin source")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{href:"https://github.com/webpack/webpack/blob/main/lib/DllEntryPlugin.js",parentName:"li"},"DllEntryPlugin source")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{href:"https://github.com/webpack/webpack/blob/main/lib/DllModuleFactory.js",parentName:"li"},"DllModuleFactory source")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{href:"https://github.com/webpack/webpack/blob/main/lib/LibManifestPlugin.js",parentName:"li"},"ManifestPlugin source"))),(0,t.yg)("h3",null,(0,t.yg)("span",{id:"tests",parentName:"h3"}),"Tests",(0,t.yg)("a",{href:"#tests","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,t.yg)("span",{className:"header-link",parentName:"a"}))),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{href:"https://github.com/webpack/webpack/blob/main/test/configCases/dll-plugin/0-create-dll/webpack.config.js",parentName:"li"},"DllPlugin creation test")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{href:"https://github.com/webpack/webpack/blob/main/test/configCases/dll-plugin/2-use-dll-without-scope/webpack.config.js",parentName:"li"},"DllPlugin without scope test")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{href:"https://github.com/webpack/webpack/tree/master/test/configCases/dll-plugin",parentName:"li"},"DllReferencePlugin use Dll test"))))}l.isMDXComponent=!0,a.default=l}}]);